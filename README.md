# Turn On the Tides (TOTs)

## Introduction

This project focuses on integrating a tidal package into the ECCO v4r5 ocean state estimate. Our goal was to test ECCO’s capabilities by incorporating tidal forcing in this coarse grid model and then analyze the resulting outputs. To achieve this, we used the ecco_v4_py and pyTMD Python packages for data visualization and comparison and for tidal analysis respectively.
Throughout the project, team members gained hands-on experience in working with large-scale oceanographic datasets and scientific software tools. Key skills developed include:
* Working with ECCO v4r5 and modifying model configurations
* Implementing and testing tidal models
* Using Python libraries (ecco_v4_py, pyTMD, NumPy, Matplotlib) for scientific data processing and visualization
* Interpreting geophysical model outputs and conducting investigative analysis
This project provided a practical opportunity to bridge theoretical knowledge in oceanography with real-world data modeling and coding practices.

### Collaborators

| Name | Personal goals | Can help with | Role |
| ------------- | ------------- | ------------- | ------------- |
| Hinne van der Zant | I want to get more experience on the ECCO codes, and how to run it | Setting up, running and analyzing ECCO output  | Team member |
| Clement Bértin | Learning ECCO physics and tides | Making great presentations and figures and ice dynamics | Team member |
| Rebecca Zaja | Learning more about tides and how to run a model | Making data analysis with python and debugging python notebooks | Team member |
| Hugo Plombat | Learn how to use and analyze MitGCM outputs | Tidal theory, and amplitude and phase maps | Team Member  |
| Yumi Abe | Learning how to run ECCO model and investigating the impact of tides | Making figures | Team member |

### The problem

In this project, we explore the technical challenge of integrating a tidal forcing package—originally designed for a high-resolution ocean model—into a coarser-resolution model: ECCO v4r5. ECCO currently lacks tidal components, which limits its ability to simulate certain ocean dynamics accurately.
By adapting and evaluating tidal forcing in ECCO v4r5, we aim to assess whether the inclusion of tides improves or degrades the model's performance. This exploration is important in the broader context of ocean modeling, as more accurate tidal representations can enhance the realism of large-scale simulations used for climate research, sea level studies, and coastal applications. If successful, this work could contribute to improved parameterizations and more reliable ocean state estimates.

## Data and Methods

### Data

The data used in this project is generated by running the ECCO v4r5 ocean model. While the model output files themselves are not included in the project directory due to their large size, the directory contains the full ECCO v4r5 source code along with detailed instructions on how to configure and run the model to produce the necessary outputs.
ECCO v4r5 (Estimating the Circulation and Climate of the Ocean, Version 4 Release 5) is a global, coarse-resolution ocean state estimate. It produces output data such as sea surface height, ocean velocities, temperature, and salinity fields, typically stored in NetCDF or binary format and compatible with analysis tools like xarray, ecco_v4_py, and pyTMD.
Official ECCO v4r5 data and documentation are available [here](https://ecco-group.org/).

Our results are compared with Oregon State University [TPXO Tide models](https://www.tpxo.net/global) base on satellite altimetry data. In particular, we compare to the 1/6 degree TPXO9.1 global tidal solution

### Existing methods

How would you or others traditionally try to address this problem? Provide any relevant citations to prior work.

### Proposed methods/tools

We port the [tidal computation MITgcm package](https://github.com/MITgcm-contrib/llc_hires/tree/master/llc_90/tides_exps) developed by Olvier Jahn at MIT  to ECCOv4r5 solution. This package requires the [SPICE toolkit](https://naif.jpl.nasa.gov/naif/toolkit.html) to work correctly. This toolkit provides precise computation of the position of the Moon and Sun for the computation of the tidal potential.


What new approaches would you like to implement for addressing your specific question(s) or application(s)?



### Additional resources or background reading

The python scripts `compute_ampli_phase_maps_from_mitgcm_output.py` and `compute_ampli_phase_maps_from_TPXO.py` require MITgcm outputs and TPXO tidal model to work properly. The folders `maps_mitgcm_1year_of_hourly_ETAN` and `maps_tpxo` contain pre-computed outputs of these two scripts, which can be read using the notebook `Amplitude_Phase_Tidal_maps.ipynb`.

Optional: links to manuscripts or technical documents providing background information, context, or other relevant information.

## Project goals


Question 1: How our computed tides on a coarse resolution simulation compare with data supported tidal solutions such as TPXO? 
We answer this question by fitting tidal constituents on sea level anomaly outputs from our simulation. We compare tidal amplitude and phase maps between MITgcm solution and TPXO, as well as spatially averages Root Mean Square (RMS).

Question 2: At what extent our simulation including tidal computation derives from ECCOv4r5 solution without tides? 
To answer this question, we ran in parallel a 5years (1992-1997) 30 minutes time-step simulation with and without tides, asking for hourly sea level anomaly output, and monthly diagnostics. We then ran a 1-month simulation with high frequency outputs (dissipation, bottom drag, horizontal and vertical velocities, kinetic energy, viscosity…), with and without tides.



List the specific project goals or research questions you want to answer. Think about what outcomes or deliverables you'd like to create (e.g. a series of tutorial notebooks demonstrating how to work with a dataset, results of an analysis to answer a science question, an example of applying a new analysis method, or a new python package).

* Goal 1
* Goal 2
* ...

## Project Results

- We compared the amplitude and phase maps of the tidal constituents fitted to our simulation with the ones from TPXO tidal model. Inspecting the phase maps, we find a good agreement on the position and number of amphidromic points. However, the spatially averaged RMS indicates that we underestimate the amplitude of most of the tidal constituents including M2, the most important, and show strong discrepancies on the diurnal constituents.
  
- Local investigation indicate that our simulation accurately reproduces the phase and amplitude of the most significant tidal constituents in the open ocean. But in strong tides coastal areas such as the Fondy bay, our simulation underestimates the M2 amplitude, and phase discrepancies for  the O1 and Q1 constituents. The coarse resolution of our simulation can lead to a misrepresentation of the tides in coastal areas.

- The presence of tides in the simulation leads to an increase in the ocean water volume compared to the no-tides simulation. This difference arises from a difference in the sea ice volume, occurring mainly in the Arctic Ocean. Tides generate internal waves which enhance the vertical mixing, resulting in a deeper mid-layer depth. The heat flux to the surface in increasing, leading to a diminution of ice formation or increased ice melting.

- Further investigation in needed to identify which of the two mechanisms provokes the sea ice volume difference between the simulation. EMU Tracer and Attribution tools could be used to get a better understanding of the observed effect.


Our final presentation can be found [here](https://docs.google.com/presentation/d/1r52yc2EwnAcNPzzIYxX7dpZDbtoXXrbS/edit?usp=drive_link&ouid=113064660181658291867&rtpof=true&sd=true): 

Use this section to briefly summarize your project results. This could take the form of describing the progress your team made to answering a research question, developing a tool or tutorial, interesting things found in exploring a new dataset, lessons learned for applying a new method, personal accomplishments of each team member, or anything else the team wants to share.

You could include figures or images here, links to notebooks or code elsewhere in the repository (such as in the [notebooks](notebooks/) folder), and information on how others can run your notebooks or code.
